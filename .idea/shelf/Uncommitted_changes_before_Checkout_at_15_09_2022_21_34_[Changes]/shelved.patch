Index: test/Post.test.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>const expect = require('expect')\nconst request = require('supertest')\nconst {ObjectId} = require('mongodb')\nconst assert = require('assert')\nconst app = require('./../server')\nconst Todo = require('./../app/models/todo')\n\n\n//The before block cleans your Todo database\n\ndescribe('todos', () => {\n    before(\"remove all todos\", function (done) {\n        Todo.remove({}, function (err, todo) {\n            done();\n        });\n    });\n\n    describe('POST /todos', () => { // 1\n        it('should create a new todo', (done) => {\n            const text = 'Test todo text'; // 2\n\n            request(app) // 3\n                .post('/api/todos')\n                .send({text})\n                .expect(200).end(function (err, res) {\n                if (err) {\n                    return done(err)\n                }\n                assert.equal(res.body[0].text, text);\n                return done();\n            })\n        })\n    })\n});
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/test/Post.test.js b/test/Post.test.js
--- a/test/Post.test.js	(revision 3484aa6a780623b5fd66756314b0f9b84337acca)
+++ b/test/Post.test.js	(date 1663270026660)
@@ -1,16 +1,33 @@
-const expect = require('expect')
+const {expect} = require('chai')
 const request = require('supertest')
 const {ObjectId} = require('mongodb')
 const assert = require('assert')
 const app = require('./../server')
 const Todo = require('./../app/models/todo')
+const waitPort = require('wait-port');
+const PORT = process.env.PORT || 8080;
+
 
+describe('server listening', () => {
+    it('should be listening', async () => {
+        const server = require ('../server.js');
+        const isOpen = await waitPort({port: PORT});
+        expect(isOpen).to.be.true;
+        await timeOut();
+        function timeOut(ms) {
+            return new Promise(
+                resolve => setTimeout(resolve, 1000)
+            )
+        }
+    });
+
+});
 
 //The before block cleans your Todo database
 
 describe('todos', () => {
     before("remove all todos", function (done) {
-        Todo.remove({}, function (err, todo) {
+        Todo.deleteMany({}, function (err, todo) {
             done();
         });
     });
@@ -28,7 +45,12 @@
                 }
                 assert.equal(res.body[0].text, text);
                 return done();
+
             })
+
         })
+
     })
-});
\ No newline at end of file
+})
+
+
Index: package.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\n  \"name\": \"node-todo\",\n  \"version\": \"0.0.1\",\n  \"description\": \"Simple todo application.\",\n  \"main\": \"server.js\",\n  \"author\": \"Scotch\",\n  \"scripts\": {\n    \"test\": \"mocha\"\n  },\n  \"dependencies\": {\n    \"assert\": \"^2.0.0\",\n    \"body-parser\": \"^1.18.2\",\n    \"chai\": \"^4.3.6\",\n    \"expect\": \"^29.0.3\",\n    \"express\": \"^4.18.1\",\n    \"method-override\": \"^2.3.10\",\n    \"morgan\": \"^1.9.0\",\n    \"request\": \"^2.88.2\",\n    \"supertest\": \"^6.2.4\",\n    \"unit.js\": \"^2.1.1\",\n    \"wait-port\": \"^0.3.0\"\n  },\n  \"devDependencies\": {\n    \"@types/mongoose\": \"^5.11.97\",\n    \"mocha\": \"^10.0.0\",\n    \"mongoose\": \"^6.6.0\"\n  }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/package.json b/package.json
--- a/package.json	(revision 3484aa6a780623b5fd66756314b0f9b84337acca)
+++ b/package.json	(date 1663270441426)
@@ -5,7 +5,7 @@
   "main": "server.js",
   "author": "Scotch",
   "scripts": {
-    "test": "mocha"
+    "test": "mocha --exit"
   },
   "dependencies": {
     "assert": "^2.0.0",
Index: test/test.test.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>const assert = require('assert')\nconst waitPort = require('wait-port');\nconst PORT = process.env.PORT || 8080;\nconst {expect} = require('chai');\n\ndescribe('server listening', () => {\n    it('should be listening', async () => {\n        const server = require ('../server.js');\n        const isOpen = await waitPort({port: PORT});\n        expect(isOpen).to.be.true;\n        await timeOut();\n        function timeOut(ms) {\n            return new Promise(\n                resolve => setTimeout(resolve, 1000)\n            )\n        }\n    });\n\n});\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/test/test.test.js b/test/test.test.js
--- a/test/test.test.js	(revision 3484aa6a780623b5fd66756314b0f9b84337acca)
+++ b/test/test.test.js	(date 1663269429465)
@@ -1,19 +1,3 @@
 const assert = require('assert')
-const waitPort = require('wait-port');
-const PORT = process.env.PORT || 8080;
 const {expect} = require('chai');
 
-describe('server listening', () => {
-    it('should be listening', async () => {
-        const server = require ('../server.js');
-        const isOpen = await waitPort({port: PORT});
-        expect(isOpen).to.be.true;
-        await timeOut();
-        function timeOut(ms) {
-            return new Promise(
-                resolve => setTimeout(resolve, 1000)
-            )
-        }
-    });
-
-});
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"9fae69de-bb5f-478e-9bfb-6e482fb674f5\" name=\"Changes\" comment=\"\">\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/package-lock.json\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/package-lock.json\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/package.json\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/package.json\" afterDir=\"false\" />\n    </list>\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"ComposerSettings\">\n    <execution />\n  </component>\n  <component name=\"FileTemplateManagerImpl\">\n    <option name=\"RECENT_TEMPLATES\">\n      <list>\n        <option value=\"JavaScript File\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\n      <map>\n        <entry key=\"$PROJECT_DIR$\" value=\"development\" />\n      </map>\n    </option>\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n  </component>\n  <component name=\"ProjectId\" id=\"2CWRshwdDpN4h6iXpF8qkW1Ka62\" />\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\">\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\n    <property name=\"com.google.cloudcode.ide_session_index\" value=\"20220913_0001\" />\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$\" />\n    <property name=\"nodejs_package_manager_path\" value=\"npm\" />\n  </component>\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"9fae69de-bb5f-478e-9bfb-6e482fb674f5\" name=\"Changes\" comment=\"\" />\n      <created>1658916563276</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1658916563276</updated>\n      <workItem from=\"1658916564541\" duration=\"352000\" />\n      <workItem from=\"1659364392189\" duration=\"9000\" />\n      <workItem from=\"1660250304252\" duration=\"836000\" />\n      <workItem from=\"1662374341689\" duration=\"3897000\" />\n      <workItem from=\"1663056709826\" duration=\"1468000\" />\n    </task>\n    <servers />\n  </component>\n  <component name=\"TypeScriptGeneratedFilesManager\">\n    <option name=\"version\" value=\"3\" />\n  </component>\n  <component name=\"Vcs.Log.Tabs.Properties\">\n    <option name=\"TAB_STATES\">\n      <map>\n        <entry key=\"MAIN\">\n          <value>\n            <State />\n          </value>\n        </entry>\n      </map>\n    </option>\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 3484aa6a780623b5fd66756314b0f9b84337acca)
+++ b/.idea/workspace.xml	(date 1663270450363)
@@ -3,8 +3,9 @@
   <component name="ChangeListManager">
     <list default="true" id="9fae69de-bb5f-478e-9bfb-6e482fb674f5" name="Changes" comment="">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/package-lock.json" beforeDir="false" afterPath="$PROJECT_DIR$/package-lock.json" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/package.json" beforeDir="false" afterPath="$PROJECT_DIR$/package.json" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/test/Post.test.js" beforeDir="false" afterPath="$PROJECT_DIR$/test/Post.test.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/test/test.test.js" beforeDir="false" afterPath="$PROJECT_DIR$/test/test.test.js" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
