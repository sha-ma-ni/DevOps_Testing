steps:
  #Install
- name: 'gcr.io/cloud-builders/npm'
  args: ['install']
  id: INSTALL
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args: [ 'echo', 'Building...' ]
  id: BUILD
- name: 'gcr.io/cloud-builders/npm'
  args: ['test']
  id: TEST
- name: 'gcr.io/cloud-builders/gcloud'
  args: [ 'gcloud functions', '$_FUNCTION_NAME', '--region=$_FUNCTION_REGION', '--source=.','--trigger-http',
      '--runtime=$_FUNCTION_RUNTIME', '--project=$_FUNCTION_PROJECT', '--entry-point=$_ENTRY_POINT']
  id: DEPLOY
substitutions:
  _FUNCTION_PROJECT: B-Testing
  _FUNCTION_NAME: functions-dev
  _FUNCTION_REGION: europe-west6
  _FUNCTION_RUNTIME: nodejs16
  _ENTRY_POINT: app